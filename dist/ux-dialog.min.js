/*
 MIT License. 
 ux-dialog v0.1.7
 author: uiwwsw
 homepage:https://github.com/uiwwsw/ux-dialog#readme
 */ "use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var c=t[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var defaultText={confirm:"확인",cancel:"취소"},contentsType={confirm:"boolean",cancel:"boolean",title:"string",content:"string",callback:"function",text:"string",selfClose:"number",closeKey:"number",cancelKey:"number",confirmKey:"number"},UxDialog=function(){function o(e){_classCallCheck(this,o),this.getDefaultContents(e||{})}return _createClass(o,[{key:"checkType",value:function(e){var o=this;Object.entries(e).map(function(e){var t=e[0],n=e[1];if("object"===_typeof(n))o.checkType(n);else{var c=contentsType[t];if(_typeof(n)!==c)throw"".concat(n,"는 ").concat(c,"이 아닙니다.")}})}},{key:"makeNode",value:function(e){var t="",n="";e.confirm&&(t='<button name="confirm" type="button">'.concat(e.confirm.text||defaultText.confirm,"</button>")),e.cancel&&(n='<button name="cancel" type="button">'.concat(e.cancel.text||defaultText.cancel,"</button>"));var c='\n          <div class="ux-dialog">\n            <div class="ux-dialog--content">\n              <button type="button" class="ux-dialog--close">this dialog close</button>\n              <div class="ux-dialog--header">'.concat(e.title,'</div>\n              <div class="ux-dialog--container">').concat(e.content,'</div>\n              <div class="ux-dialog--footer">').concat(t).concat(n,'</div>\n              <i class="ux-dialog--loading"></i>\n            </div>\n            <i class="ux-dialog--dim"></i>\n          </div>\n        ');return o.htmlToElement(c)}},{key:"append",value:function(e){var t=document.body;this.element=this.makeNode(e),t.appendChild(this.element)}},{key:"getDefaultContents",value:function(e){var t=this;this.checkType(e),this.element=null,this.contents={},Object.entries(e).map(function(e){t.contents[e[0]]=e[1]})}},{key:"bindEvent",value:function(t){var n=this;window.onkeyup=function(e){if(t.closeKey!==e.keyCode)return t.cancelKey===e.keyCode?(t.cancel.callback&&t.cancel.callback(),void n.close()):void(t.confirmKey!==e.keyCode||t.confirm.callback&&t.confirm.callback());n.close()},this.element.querySelector(".ux-dialog--close").onclick=function(){n.close()},this.element.querySelector(".ux-dialog--footer").onclick=function(e){switch(e.target.name){case"confirm":t.confirm.callback&&t.confirm.callback();break;case"cancel":t.cancel.callback&&t.cancel.callback(),n.close()}}}},{key:"open",value:function(e){var c=this;if(null===this.element){var o=Object.assign({},this.contents);e&&(this.checkType(e),Object.entries(e).map(function(e){var t=e[0],n=e[1];c.contents[t]!==n&&(o[t]=n)})),this.append(o),this.bindEvent(o),o.selfClose&&(clearTimeout(this.sto),this.element.querySelector(".ux-dialog--loading").style.animationDuration=o.selfClose/1e3+"s",this.sto=setTimeout(function(){c.close()},o.selfClose))}}},{key:"close",value:function(){var e=this.element;e&&(e.classList.add("close"),e.querySelector(".ux-dialog--dim").addEventListener("animationend",function(){e.remove()}),this.element=null)}}],[{key:"htmlToElement",value:function(e){var t=document.createElement("template");return e=e.trim(),t.innerHTML=e,t.content.firstChild}}]),o}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbImRlZmF1bHRUZXh0IiwiY29uZmlybSIsImNhbmNlbCIsImNvbnRlbnRzVHlwZSIsInRpdGxlIiwiY29udGVudCIsImNhbGxiYWNrIiwidGV4dCIsInNlbGZDbG9zZSIsImNsb3NlS2V5IiwiY2FuY2VsS2V5IiwiY29uZmlybUtleSIsIlV4RGlhbG9nIiwiY29udGVudHMiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiZ2V0RGVmYXVsdENvbnRlbnRzIiwib2JqZWN0IiwiX3RoaXMiLCJPYmplY3QiLCJlbnRyaWVzIiwibWFwIiwidmFsIiwia2V5IiwidmFsdWUiLCJfdHlwZW9mIiwiY2hlY2tUeXBlIiwidHlwZSIsImNvbmNhdCIsImRpYWxvZyIsImh0bWxUb0VsZW1lbnQiLCJib2R5IiwiZG9jdW1lbnQiLCJlbGVtZW50IiwibWFrZU5vZGUiLCJhcHBlbmRDaGlsZCIsIl90aGlzMiIsIl90aGlzMyIsIndpbmRvdyIsIm9ua2V5dXAiLCJlIiwia2V5Q29kZSIsImNsb3NlIiwicXVlcnlTZWxlY3RvciIsIm9uY2xpY2siLCJ0YXJnZXQiLCJuYW1lIiwiX3RoaXM0Iiwib25jZSIsImFzc2lnbiIsImFwcGVuZCIsImJpbmRFdmVudCIsImNsZWFyVGltZW91dCIsInN0byIsInN0eWxlIiwiYW5pbWF0aW9uRHVyYXRpb24iLCJzZXRUaW1lb3V0IiwiY2xhc3NMaXN0IiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZSIsInN0ciIsInRlbXBsYXRlIiwiY3JlYXRlRWxlbWVudCIsInRyaW0iLCJpbm5lckhUTUwiLCJmaXJzdENoaWxkIl0sIm1hcHBpbmdzIjoiOzs7Ozt3b0JBZ0JBLElBQU1BLFlBQWMsQ0FDaEJDLFFBQVMsS0FDVEMsT0FBUSxNQUdOQyxhQUFlLENBQ2pCRixRQUFTLFVBQ1RDLE9BQVEsVUFDUkUsTUFBTyxTQUNQQyxRQUFTLFNBQ1RDLFNBQVUsV0FDVkMsS0FBTSxTQUNOQyxVQUFXLFNBQ1hDLFNB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QUtMLFNBQ05NLEVBQUt4Qyw2Q0FNaEIsSUFBTXlCLEVBQVVsQixLQUFLa0IsUUFDakJBLElBQ0FBLEVBQVF3QixVQUFVQyxJQUFJLFNBQ3RCekIsRUFBUVUsY0FBYyxtQkFBbUJnQixpQkFBaUIsZUFBZ0IsV0FDdEUxQixFQUFRMkIsV0FFWjdDLEtBQUtrQixRQUFVLDhDQXhGRjRCLEdBQ2pCLElBQU1DLEVBQVc5QixTQUFTK0IsY0FBYyxZQUd4QyxPQUZBRixFQUFNQSxFQUFJRyxPQUNWRixFQUFTRyxVQUFZSixFQUNkQyxFQUFTekQsUUFBUTZEIiwiZmlsZSI6InV4LWRpYWxvZy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbnRlcmZhY2UgQnV0dG9uIHtcclxuICAgIGNhbGxiYWNrPzogRnVuY3Rpb247XHJcbiAgICB0ZXh0Pzogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgQ29udGVudHMge1xyXG4gICAgdGl0bGU/OiBzdHJpbmc7XHJcbiAgICBjb250ZW50Pzogc3RyaW5nIHwgTm9kZTtcclxuICAgIGNvbmZpcm0/OiBCdXR0b24gfCBudWxsO1xyXG4gICAgY2FuY2VsPzogQnV0dG9uIHwgbnVsbDtcclxuICAgIHNlbGZDbG9zZT86IG51bWJlcjtcclxuICAgIGNsb3NlS2V5PzogbnVtYmVyO1xyXG4gICAgY2FuY2VsS2V5PzogbnVtYmVyO1xyXG4gICAgY29uZmlybUtleT86IG51bWJlcjtcclxufVxyXG5cclxuY29uc3QgZGVmYXVsdFRleHQgPSB7XHJcbiAgICBjb25maXJtOiAn7ZmV7J24JyxcclxuICAgIGNhbmNlbDogJ+y3qOyGjCdcclxufTtcclxuXHJcbmNvbnN0IGNvbnRlbnRzVHlwZSA9IHtcclxuICAgIGNvbmZpcm06ICdib29sZWFuJyxcclxuICAgIGNhbmNlbDogJ2Jvb2xlYW4nLFxyXG4gICAgdGl0bGU6ICdzdHJpbmcnLFxyXG4gICAgY29udGVudDogJ3N0cmluZycsXHJcbiAgICBjYWxsYmFjazogJ2Z1bmN0aW9uJyxcclxuICAgIHRleHQ6ICdzdHJpbmcnLFxyXG4gICAgc2VsZkNsb3NlOiAnbnVtYmVyJyxcclxuICAgIGNsb3NlS2V5OiAnbnVtYmVyJyxcclxuICAgIGNhbmNlbEtleTogJ251bWJlcicsXHJcbiAgICBjb25maXJtS2V5OiAnbnVtYmVyJ1xyXG59O1xyXG5cclxuY2xhc3MgVXhEaWFsb2cge1xyXG4gICAgcHJpdmF0ZSBzdG86IGFueTtcclxuICAgIHByaXZhdGUgZWxlbWVudDogYW55O1xyXG4gICAgcHJpdmF0ZSBjb250ZW50czogQ29udGVudHM7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29udGVudHM6IENvbnRlbnRzKSB7XHJcbiAgICAgICAgdGhpcy5nZXREZWZhdWx0Q29udGVudHMoY29udGVudHMgfHwge30pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2hlY2tUeXBlKG9iamVjdDogb2JqZWN0KTogdm9pZCB7XHJcbiAgICAgICAgT2JqZWN0LmVudHJpZXMob2JqZWN0KS5tYXAoKHZhbCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBrZXkgPSB2YWxbMF07XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdmFsWzFdO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja1R5cGUodmFsdWUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IGNvbnRlbnRzVHlwZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gdHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGAke3ZhbHVlfeuKlCAke3R5cGV97J20IOyVhOuLmeuLiOuLpC5gXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG1ha2VOb2RlKGNvbnRlbnRzOiBDb250ZW50cyk6IGFueSB7XHJcbiAgICAgICAgbGV0IGNvbmZpcm0gPSAnJztcclxuICAgICAgICBsZXQgY2FuY2VsID0gJyc7XHJcbiAgICAgICAgaWYgKGNvbnRlbnRzLmNvbmZpcm0pIHtcclxuICAgICAgICAgICAgY29uZmlybSA9IGA8YnV0dG9uIG5hbWU9XCJjb25maXJtXCIgdHlwZT1cImJ1dHRvblwiPiR7Y29udGVudHMuY29uZmlybS50ZXh0IHx8IGRlZmF1bHRUZXh0LmNvbmZpcm19PC9idXR0b24+YFxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29udGVudHMuY2FuY2VsKSB7XHJcbiAgICAgICAgICAgIGNhbmNlbCA9IGA8YnV0dG9uIG5hbWU9XCJjYW5jZWxcIiB0eXBlPVwiYnV0dG9uXCI+JHtjb250ZW50cy5jYW5jZWwudGV4dCB8fCBkZWZhdWx0VGV4dC5jYW5jZWx9PC9idXR0b24+YFxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBkaWFsb2cgPSBgXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidXgtZGlhbG9nXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1eC1kaWFsb2ctLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cInV4LWRpYWxvZy0tY2xvc2VcIj50aGlzIGRpYWxvZyBjbG9zZTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1eC1kaWFsb2ctLWhlYWRlclwiPiR7Y29udGVudHMudGl0bGV9PC9kaXY+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInV4LWRpYWxvZy0tY29udGFpbmVyXCI+JHtjb250ZW50cy5jb250ZW50fTwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1eC1kaWFsb2ctLWZvb3RlclwiPiR7Y29uZmlybX0ke2NhbmNlbH08L2Rpdj5cclxuICAgICAgICAgICAgICA8aSBjbGFzcz1cInV4LWRpYWxvZy0tbG9hZGluZ1wiPjwvaT5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxpIGNsYXNzPVwidXgtZGlhbG9nLS1kaW1cIj48L2k+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICBgO1xyXG4gICAgICAgIHJldHVybiBVeERpYWxvZy5odG1sVG9FbGVtZW50KGRpYWxvZyk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGh0bWxUb0VsZW1lbnQoc3RyOiBzdHJpbmcpOiBhbnkge1xyXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcclxuICAgICAgICBzdHIgPSBzdHIudHJpbSgpO1xyXG4gICAgICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IHN0cjtcclxuICAgICAgICByZXR1cm4gdGVtcGxhdGUuY29udGVudC5maXJzdENoaWxkO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXBwZW5kKGNvbnRlbnRzOiBDb250ZW50cykge1xyXG4gICAgICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5O1xyXG4gICAgICAgIHRoaXMuZWxlbWVudCA9IHRoaXMubWFrZU5vZGUoY29udGVudHMpO1xyXG4gICAgICAgIGJvZHkuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldERlZmF1bHRDb250ZW50cyhjb250ZW50czogQ29udGVudHMpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNoZWNrVHlwZShjb250ZW50cyk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNvbnRlbnRzID0ge307XHJcbiAgICAgICAgT2JqZWN0LmVudHJpZXMoY29udGVudHMpLm1hcCgodmFsKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGVudHNbdmFsWzBdXSA9IHZhbFsxXTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJpbmRFdmVudChjb250ZW50cz86IENvbnRlbnRzKSB7XHJcbiAgICAgICAgd2luZG93Lm9ua2V5dXAgPSBlID0+IHtcclxuICAgICAgICAgICAgaWYgKGNvbnRlbnRzLmNsb3NlS2V5ID09PSBlLmtleUNvZGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY29udGVudHMuY2FuY2VsS2V5ID09PSBlLmtleUNvZGUpIHtcclxuICAgICAgICAgICAgICAgIChjb250ZW50cy5jYW5jZWwuY2FsbGJhY2spICYmIChjb250ZW50cy5jYW5jZWwuY2FsbGJhY2soKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvbnRlbnRzLmNvbmZpcm1LZXkgPT09IGUua2V5Q29kZSkge1xyXG4gICAgICAgICAgICAgICAgKGNvbnRlbnRzLmNvbmZpcm0uY2FsbGJhY2spICYmIChjb250ZW50cy5jb25maXJtLmNhbGxiYWNrKCkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLnV4LWRpYWxvZy0tY2xvc2UnKS5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLnV4LWRpYWxvZy0tZm9vdGVyJykub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBlLnRhcmdldC5uYW1lO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2NvbmZpcm0nOlxyXG4gICAgICAgICAgICAgICAgICAgIChjb250ZW50cy5jb25maXJtLmNhbGxiYWNrKSAmJiAoY29udGVudHMuY29uZmlybS5jYWxsYmFjaygpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2NhbmNlbCc6XHJcbiAgICAgICAgICAgICAgICAgICAgKGNvbnRlbnRzLmNhbmNlbC5jYWxsYmFjaykgJiYgKGNvbnRlbnRzLmNhbmNlbC5jYWxsYmFjaygpKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9wZW4oY29udGVudHM/OiBDb250ZW50cyk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgbGV0IG9uY2U6IENvbnRlbnRzID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5jb250ZW50cyk7XHJcbiAgICAgICAgICAgIGlmIChjb250ZW50cykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja1R5cGUoY29udGVudHMpO1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoY29udGVudHMpLm1hcCgodmFsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gdmFsWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdmFsWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnRzW2tleV0gIT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uY2Vba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kKG9uY2UpO1xyXG4gICAgICAgICAgICB0aGlzLmJpbmRFdmVudChvbmNlKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChvbmNlLnNlbGZDbG9zZSkge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc3RvKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudXgtZGlhbG9nLS1sb2FkaW5nJykuc3R5bGUuYW5pbWF0aW9uRHVyYXRpb24gPSBvbmNlLnNlbGZDbG9zZSAvIDEwMDAgKyAncyc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0byA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH0sIG9uY2Uuc2VsZkNsb3NlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xvc2UoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuZWxlbWVudDtcclxuICAgICAgICBpZiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2Nsb3NlJyk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnV4LWRpYWxvZy0tZGltJykuYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4iXX0=
